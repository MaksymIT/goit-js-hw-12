{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalerryCard = image => {\n    return `\n        <a href=\"${image.largeImageURL}\">\n            <div class=\"gallery-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n            </div>\n        </a>`;\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com';\nconst API_KEY = '46898279-65d5dcdd2fa29fc168f36b5dd';\n\nexport const fetchPhotos = async (query, page = 1) => {\n    const urlParams = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    };\n\n    try {\n        const response = await axios.get(`${BASE_URL}/api/`, { params: urlParams });\n        return response.data;\n    } catch (error) {\n        console.error('Axios error:', error);\n        throw error;\n    }\n};\n","import axios from 'axios';\n\n// import functions\nimport { createGalerryCard } from \"./js/render-functions\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\n\n// find HTML elements\nconst searchForm = document.querySelector('.search-container');\nconst galerryEl = document.querySelector(\".galerry-js\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".galerry-js a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n// Глобальні змінні для пагінації\nlet page = 1;\nlet userInput = '';\n\n// Функція для приховування індикатора завантаження\nfunction hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\n// Функція для показу індикатора завантаження\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\n// Функція для показу та приховування кнопки \"Load more\"\nfunction showLoadMoreBtn() {\n    loadMoreBtn.classList.remove(\"hidden\");\n}\n\nfunction hideLoadMoreBtn() {\n    loadMoreBtn.classList.add(\"hidden\");\n}\n\n// Основна функція обробки форми\nconst clickForm = async (event) => {\n  event.preventDefault();\n\n  userInput = searchForm.elements.user_query.value.trim();\n  page = 1;\n\n  if (!userInput) {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Please enter a search query.\",\n    });\n    return;\n  }\n\n  galerryEl.innerHTML = \"\";\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    await loadImages();\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"An error occurred while fetching images. Please try again later.\",\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n};\n\n// Функція для завантаження зображень\nconst loadImages = async () => {\n  try {\n    const data = await fetchPhotos(userInput, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      hideLoadMoreBtn();\n      return;\n    }\n\n    const galerryCardTemplate = data.hits.map(img => createGalerryCard(img)).join('');\n    galerryEl.insertAdjacentHTML('beforeend', galerryCardTemplate);\n    lightbox.refresh();\n\n    const totalPages = Math.ceil(data.totalHits / 15);\n    if (page >= totalPages) {\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideLoadMoreBtn();\n    } else {\n      showLoadMoreBtn();\n    }\n\n    smoothScroll();\n    page += 1;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\n// Функція для обробки кнопки \"Load more\"\nconst handleLoadMore = async () => {\n  showLoader();\n  hideLoadMoreBtn();\n  await loadImages();\n  hideLoader();\n};\n\n// Функція для плавного прокручування\nconst smoothScroll = () => {\n  const { height: cardHeight } = galerryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n};\n\nsearchForm.addEventListener('submit', clickForm);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n"],"names":["createGalerryCard","image","BASE_URL","API_KEY","fetchPhotos","query","page","urlParams","axios","error","searchForm","galerryEl","loader","loadMoreBtn","lightbox","SimpleLightbox","userInput","hideLoader","showLoader","showLoadMoreBtn","hideLoadMoreBtn","clickForm","event","iziToast","loadImages","data","galerryCardTemplate","img","totalPages","smoothScroll","handleLoadMore","cardHeight"],"mappings":"+vBAAO,MAAMA,EAAoBC,GACtB;AAAA,mBACQA,EAAM,aAAa;AAAA;AAAA,4BAEVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,gCAElCA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,cCP7CC,EAAW,sBACXC,EAAU,qCAEHC,EAAc,MAAOC,EAAOC,EAAO,IAAM,CAClD,MAAMC,EAAY,CACd,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAEI,GAAI,CAEA,OADiB,MAAME,EAAM,IAAI,GAAGN,CAAQ,QAAS,CAAE,OAAQK,CAAW,CAAA,GAC1D,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,eAAgBA,CAAK,EAC7BA,CACT,CACL,EChBMC,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EASjDC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAGD,IAAIT,EAAO,EACPU,EAAY,GAGhB,SAASC,GAAa,CAClBL,EAAO,UAAU,IAAI,QAAQ,CACjC,CAGA,SAASM,GAAa,CAClBN,EAAO,UAAU,OAAO,QAAQ,CACpC,CAGA,SAASO,GAAkB,CACvBN,EAAY,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASO,GAAkB,CACvBP,EAAY,UAAU,IAAI,QAAQ,CACtC,CAGA,MAAMQ,EAAY,MAAOC,GAAU,CAMjC,GALAA,EAAM,eAAc,EAEpBN,EAAYN,EAAW,SAAS,WAAW,MAAM,KAAI,EACrDJ,EAAO,EAEH,CAACU,EAAW,CACdO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDZ,EAAU,UAAY,GACtBS,IACAF,IAEA,GAAI,CACF,MAAMM,EAAU,CACjB,OAAQf,EAAO,CACdc,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kEACf,CAAK,EACD,QAAQ,MAAMd,CAAK,CACvB,QAAY,CACRQ,GACD,CACH,EAGMO,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMC,EAAO,MAAMrB,EAAYY,EAAWV,CAAI,EAE9C,GAAImB,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACjB,CAAO,EACDH,IACA,MACD,CAED,MAAMM,EAAsBD,EAAK,KAAK,IAAIE,GAAO3B,EAAkB2B,CAAG,CAAC,EAAE,KAAK,EAAE,EAChFhB,EAAU,mBAAmB,YAAae,CAAmB,EAC7DZ,EAAS,QAAO,EAEhB,MAAMc,EAAa,KAAK,KAAKH,EAAK,UAAY,EAAE,EAC5CnB,GAAQsB,GACVL,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EACDH,KAEAD,IAGFU,IACAvB,GAAQ,CACT,OAAQG,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,EAGMqB,EAAiB,SAAY,CACjCZ,IACAE,IACA,MAAMI,EAAU,EAChBP,GACF,EAGMY,EAAe,IAAM,CACzB,KAAM,CAAE,OAAQE,CAAU,EAAKpB,EAAU,kBAAkB,wBAC3D,OAAO,SAAS,CACd,IAAKoB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EAEArB,EAAW,iBAAiB,SAAUW,CAAS,EAC/CR,EAAY,iBAAiB,QAASiB,CAAc"}